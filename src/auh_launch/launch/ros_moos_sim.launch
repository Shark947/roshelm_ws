<launch>
  <!-- 参数定义 -->
  <arg name="gui" default="true" />
  <arg name="paused" default="true" />
  <arg name="moos_mission_file" default="$(find ros_moos_bridge)/config/test.moos" />
  <arg name="vehicle_name" default="auh" />

  <!-- 启动仿真环境 -->
  <include file="$(find uuv_gazebo_worlds)/launch/auv_underwater_world.launch">
    <arg name="gui" value="$(arg gui)" />
    <arg name="paused" value="$(arg paused)" />
  </include>

  <!-- 2. 加载 AUH 模型描述 -->
  <include file="$(find auh_description)/launch/upload_auh_default.launch" />

  <!-- 3. 启动推进器控制器 -->
  <include file="$(find auh_thrust_manager)/launch/thrust_manager.launch" />

  <!-- 4. 启动变量提取器 -->
  <node pkg="variable_extractor"
        type="variable_extractor_node"
        name="variable_extractor_node"
        output="screen">
    <param name="vehicle_name" value="$(arg vehicle_name)" />
    <param name="debug" value="false" />
  </node>

  <!-- 5. 启动控制器管理器 -->
  <node pkg="controller_manager"
        type="controller_manager_node"
        name="controller_manager_node"
        output="screen">
    <param name="controllers_config" value="$(find controller_manager)/config/controllers.yaml" />
  </node>

  <!-- 6. 启动 ROS-MOOS 桥接器 -->
  <node pkg="ros_moos_bridge"
        type="bridge_node"
        name="bridge_node"
        output="screen">
    <param name="moos_mission_file" value="$(arg moos_mission_file)" />
    <param name="vehicle_name" value="$(arg vehicle_name)" />
  </node>

</launch>
