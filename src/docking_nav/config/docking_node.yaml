# ====== 调度周期 ======
# 通信/控制迭代周期，秒
nav_server_period: 0.1

# ====== 相机/安装几何 ======
# 相机与艇体参考点的水平偏移量 ΔL，米
optical_camera_delta_l: 0
# 相机半视场角 α，单位：deg
camera_view_angle_deg: 31.15

# ====== 坞站几何/姿态基准 ======
# 坞站基准深度 D_dock，米
dock_depth: 79.8
# 坞站面板/光源相对坞站深度的偏置 d_p，米
dock_panel: 0.1

# DockHeading (DockHeading): 坞站期望航向（注意：原MOOS代码内部会做 +90 并 angle360）
dock_heading_deg: 0.0
# DockPitch (DockPitch): 坞站期望俯仰角
dock_pitch_deg: 0.0
# DockRoll (DockRoll): 坞站期望横滚角
dock_roll_deg: 0.0

# ====== 深度相关偏置 ======
# DepthBias (DepthBias): 深度零偏/安装偏置 b_d，米
depth_bias: 0.0
# DepthGroundBias (DepthGroundBias): 地面/参考面偏置 b_g，米
depth_ground_bias: 0.0
# DepthCameraBias (DepthCameraBias): 相机深度偏置 b_c，米
depth_camera_bias: 0.83

# ====== 分层对准 ======
# AlignDepth (AlignDepth): 例 "5:4" 表示 a_i 序列，真实对准深度为 D_light - a_i
# ROS里用数组表达
align_depth_offsets: [5.0, 4.0, 3.0]

# PhaseDepth (PhaseDepth): MOOS配置里有，但原代码里 push_back 被注释了（先保留，后续ROS版决定是否启用）
phase_depth_list: [0.0, 3.0]

# ====== 入坞末端策略参数 ======
# FallDepth (FallDepth): 下沉入坞深度余量 ΔD_fall，米（目标深度 = DockDepth + FallDepth）
fall_depth: 0.3

# dradius (dradius): 最终触发半径 r_d，米
dradius: 1
# dinheading (dinheading): 航向误差门限 Δψ_max，deg
dinheading_deg: 20.0

# DistanceBias (DistanceBias): 深度差/距离一致性阈值 ε_z，米
distance_bias: 0.5
# AngleBias (AngleBias): 姿态一致性阈值 ε_angle，deg
angle_bias_deg: 5.0

# （可选）radius1th (radius1th): 代码里支持读取但配置没给；先给个默认
radius1th: 0.0

# ====== 计时/超时/重试 ======
# MaxtryMinuteNum (MaxtryMinuteNum): 最大尝试时长（分钟）
maxtry_minute_num: 1
# ConstantDepthMinuteNum (ConstantDepthMinuteNum): 定深等待/判据计时（分钟）
constant_depth_minute_num: 1
# LastPhaseFloatTime (LastPhaseFloatTime): 最后阶段漂浮/等待时间，毫秒
last_phase_float_time_ms: 5000
# TransimitDuration (TransimitDuration): 连续有效视觉的判定时长（秒）
transimit_duration_sec: 15
# DockingMaxTry (DockingMaxTry): 入坞最大重试次数
docking_max_try: 3

# ====== 视觉数据超时 ======
# 超时未收到视觉数据则视为无效
optical_timeout_sec: 0.5
# 短时无效去抖：连续无效次数达到阈值才进入 fallback（0 表示关闭）
optical_invalid_debounce_count: 3
# 连续帧 next_xy 最大跳变阈值（m）
optical_max_next_xy_jump_m: 3.0

# ====== 光学自动进入入坞阶段 ======
# 当光学数据稳定且距离进入首层外圈时，自动切换 MODE=CLOSETODOCKING
auto_enter_closetodocking: true
auto_enter_duration_sec: 4.0

# ====== 入坞末端控制迟滞/稳定性 ======
# STATIONING最短保持时间（秒），避免内外圈阈值附近频繁切换
stationing_min_hold_sec: 1.5
# 内圈判定比例（< inner_radius * ratio 才认为进入内圈）
stationing_inner_ratio: 0.85
# 退出内圈判定比例（> inner_radius * ratio 才认为退出内圈）
stationing_outer_ratio: 1.25
# 内圈内保持一定距离，避免过近导致误触发
stationing_inner_min_distance: 0.3
# 进入内圈后保持一段时间再进入航向对准（秒）
heading_align_delay_sec: 3
